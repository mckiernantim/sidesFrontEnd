<div class="overflow-x-auto">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th *ngFor="let column of columns" 
            scope="col" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
            (click)="sort(column.field)"
            [style.width]="column.width">
          {{ column.header }}
          <span *ngIf="sortColumn === column.field">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
        <th *ngIf="showActions" scope="col" class="relative px-6 py-3">
          <span class="sr-only">Actions</span>
        </th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <tr *ngFor="let item of sortedData; let i = index" 
          (click)="rowClick.emit(item)"
          class="hover:bg-gray-100 transition-colors cursor-pointer">
        <td *ngFor="let column of columns" class="px-6 py-4 whitespace-nowrap">
          {{ item[column.field] }}
        </td>
        <td *ngIf="showActions" class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
          <ng-content select="[actions]"></ng-content>
        </td>
      </tr>
      <tr *ngIf="!data || data.length === 0">
        <td [attr.colspan]="columns.length + (showActions ? 1 : 0)" class="px-6 py-4 text-center text-gray-500">
          No data available
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Pagination -->
<div *ngIf="showPagination && data && data.length > 0" class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
  <div class="flex flex-1 justify-between sm:hidden">
    <button 
      [disabled]="currentPage === 0"
      (click)="prevPage()"
      class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"
      [class.opacity-50]="currentPage === 0">
      Previous
    </button>
    <button 
      [disabled]="currentPage >= totalPages - 1"
      (click)="nextPage()"
      class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"
      [class.opacity-50]="currentPage >= totalPages - 1">
      Next
    </button>
  </div>
  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
    <div>
      <p class="text-sm text-gray-700">
        Showing
        <span class="font-medium">{{ startIndex + 1 }}</span>
        to
        <span class="font-medium">{{ Math.min(endIndex, data.length) }}</span>
        of
        <span class="font-medium">{{ data.length }}</span>
        results
      </p>
    </div>
    <div>
      <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
        <button
          [disabled]="currentPage === 0"
          (click)="prevPage()"
          class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"
          [class.opacity-50]="currentPage === 0">
          <span class="sr-only">Previous</span>
          &larr;
        </button>
        <button
          *ngFor="let page of pageNumbers"
          (click)="goToPage(page)"
          [class.bg-indigo-600]="page === currentPage"
          [class.text-white]="page === currentPage"
          [class.text-gray-900]="page !== currentPage"
          class="relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
          {{ page + 1 }}
        </button>
        <button
          [disabled]="currentPage >= totalPages - 1"
          (click)="nextPage()"
          class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"
          [class.opacity-50]="currentPage >= totalPages - 1">
          <span class="sr-only">Next</span>
          &rarr;
        </button>
      </nav>
    </div>
  </div>
</div> 